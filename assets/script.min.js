function InputValueText(obj) {
	var input = document.querySelectorAll(obj.idForm);
	for (var i = 0; i < input.length; i++) {
		input[i].value = obj.textInput[i];
	};
};

var formValueText = InputValueText({
	idForm: '.form input',
	textInput: [' Как к вам обращаться?', 
	            ' Номер вашего телефона']
});

function InputChekValue(obj) {
	var input = document.querySelectorAll(obj.idForm);
	for (var i = 0; i < input.length; i++) {
		
		(function inputFocus(i) {
			input[i].onfocus = function() {
				if (input[i].value == obj.textInput[i]) input[i].value = ' ';
			};
		})(i);
		
		(function blurInput(i) {
			input[i].onblur = function() {
				if (!input[i].value.trim()) input[i].value = obj.textInput[i];
			};
		})(i);
	};
};
var formChek = InputChekValue({
	idForm: '.form input',
	textInput: [' Как к вам обращаться?', 
	            ' Номер вашего телефона']
});
function GreatMainModal (objModal) {
	windowModal = document.querySelector(objModal.modal);
	windowModal.style.display = 'none';
	
	var backDropModal = document.createElement('div');
	backDropModal.style.display = 'none';
	backDropModal.className = 'backdrop';
	document.body.appendChild(backDropModal);

	this.btnOpen = document.querySelectorAll(objModal.btnModal);
	this.btnClose = document.querySelector(objModal.modal + ' button');

	this.modalClose = function () {
		windowModal.style.display = 'none';
		backDropModal.style.display = 'none';
		document.querySelector('body').style.overflow = '';
	},
	this.modalOpen = function () {
		windowModal.style.display = 'block';
		backDropModal.style.display = 'block';
		document.querySelector('body').style.overflow = 'hidden';
	},
	this.allBtnOpen = function(){
		for (var i = 0; i < this.btnOpen.length; i++) {
			this.btnOpen[i].addEventListener('click', this.modalOpen);
		}
	},
	this.allBtnOpen();
	this.btnClose.addEventListener('click', this.modalClose);
	backDropModal.addEventListener('click', this.modalClose);
};
var mainModal = GreatMainModal({
	modal: '.main-modal',
	btnModal: '.btn-modal'
});

function Modal(objModal) {

	this.textModal = objModal.textModal;
	this.btnText = objModal.btnText || 'закрыть';
	this.btnOpen = document.querySelector(objModal.btnOpen);
	this.width = objModal.width;
	this.height = objModal.height;
	var windowModal;
	var backDropModal;

	this.createModal =  function () {
		windowModal = document.createElement('div');
		windowModal.style.display = 'none';
		windowModal.className = 'modal';
		windowModal.innerHTML = this.textModal;
		document.body.appendChild(windowModal);
		if (this.width) {
			windowModal.style.maxWidth = this.width;
		};
		if (this.height) {
			windowModal.style.height = this.height;
		}

		backDropModal = document.createElement('div');
		backDropModal.style.display = 'none';
		backDropModal.className = 'backdrop';
		document.body.appendChild(backDropModal);

		crossModal = document.createElement('span');
		windowModal.appendChild(crossModal);

		this.btnClose = document.createElement('button');
		btnClose.innerHTML = this.btnText;
		windowModal.appendChild(btnClose);
	},
	
	this.openModal = function () {
		windowModal.style.display = 'flex';
		backDropModal.style.display = 'block';
		document.querySelector('body').style.overflow = 'hidden';
	},
	this.closeModal = function () {
		windowModal.style.display = 'none';
		backDropModal.style.display = 'none';
		document.querySelector('body').style.overflow = '';
	},

	this.createModal();
	this.btnOpen.addEventListener('click', this.openModal);
	btnClose.addEventListener('click', this.closeModal);
	backDropModal.addEventListener('click', this.closeModal);
	crossModal.addEventListener('click', this.closeModal);
};

var denialModal = Modal({
	btnOpen: '.denial',
	btnText: 'принять',
	textModal: '<h3>Отказ от ответственности</h3> \
	<div>\
	            <p>1. Мы оставляем за собой право опубликовать на сайте любую информацию, присланную нам по электронному адресу: info@mirshkaf.ru </p>\
	            <p>2. Мы не осуществляем контроль за действиями пользователей, которые могут повторно разместить ранее удаленные ссылки на информацию, нарушающую Ваши авторские права. Любая информация на сайте размещается автоматически, без какого либо контроля с нашей стороны, что соответствует общепринятой мировой практике размещения информации в сети интернет. Однако, мы в любом случае рассмотрим все Ваши запросы, относительно ссылок на информацию, нарушающую Ваши права и\ примем все зависящие от нас меры реагирования.</p>\
	            <p>3. Обращаем внимание, что согласно положениям части IV раздела VII Гражданского кодекса Российской Федерации, регулирующих отношения в области авторских и смежных прав, ссылка на любые данные (информационное сообщение), сама по себе, не является нарушением прав на результат интеллектуальной деятельности, защищенного авторским правом. Таким образом, не стоит присылать письма, не имеющие под собой реальных правовых оснований.</p>\
	            <p>4. Изображения, использованные на сайте взяты из открытых источников. Если какие-либо иллюстрации нарушают ваше авторское право, и вы можете доказать право собственности на них, вы можете запросить их удаление с сайта. Корпоративные логотипы на сайте, являются собственностью их владельцев и их использование несет только информативное значение. Все торговые марки являются собственностью их соответствующих владельцев</p>\
	            <p>5. Сайт http://mirshkaf.ru не принимает на себя никакой ответственности за точность, полноту или использование информации, содержащейся на данном сайте, а также ответственности за ее обновление.\</p>\
	            <p>6. Определенная информация, содержащаяся на данном сайте, относится к прошлому и, возможно, устарела.</p>\
	            <p>7. Никто из авторов, участников, спонсоров, администраторов, операторов и лиц, как-либо ещё связанных с http://mirshkaf.ru, не несёт ответственность за появление неточной или ложной информации,</p>\
	            <p>8. Сайт http://mirshkaf.ru ни при каких обстоятельствах не несет ответственности за убытки, прямые или косвенные, которые могут возникнуть в результате использования или неправильного использования, опубликованной здесь информации.</p>\
	            <p>Используя этот веб-сайт, вы заявляете о своем согласии с данным дисклеймером.<br/>С уважением, Администрация сайта mirshkaf.ru</p> \
	 </div>'
});
var agreementModal = Modal({
	btnOpen: '.agreement',
	btnText: 'принять',
	textModal: '<h3>Согласие с рассылкой</h3> \
	<div> \
	            <p>Заполняя форму подписки на сайте http://mirshkaf.ru, вы соглашаетесь с политикой конфиденциальности проекта, а также с другими положениями:</p> \
	            <p>1. Подписчик дает бессрочное согласие на обработку всех персональных данных, предоставленных http://mirshkaf.ru</p> \
	            <p>2. Подписчик не возражает против получения email уведомлений от http://mirshkaf.ru</p> \
	            <p>3. Подписчик не возражает против получения email уведомлений рекламного характера о предстоящих акциях, изменениях на проекте, иных событиях, представляющих возможный интерес для Подписчика.</p> \
	            <p>4. Подписчик может отписаться от информационной рассылки проекта https://chessmatenok.ru в любое время по своему желанию при помощи специальной гиперссылки, содержащейся в каждом письме, а так же обратившись к администрации сайта через раздел «Написать мне» и попросив удалить его e-mail адрес из нашей подписной базы.</p> \
	            <p>После получения администрацией сайта http://mirshkaf.ru такой просьбы, e-mail адрес будет удален из базы в течение 48 часов о чем подписчик будет уведомлен дополнительно.</p> \
	</div>'
	        });
var privacyModal = Modal({
	btnOpen: '.privacy',
	textModal: '<h3>Политика конфинденциальности</h3> \
	<div>\
	            <p>Заполняя форму на нашем сайте — вы соглашаетесь с нашей политикой конфиденциальности. Также вы соглашаетесь с тем, что мы имеем право разглашать ваши личные данные в следующих случаях:</p> \
	            <p>1. С Вашего согласия: Во всех остальных случаях перед передачей информации о Вас третьим сторонам наша Компания обязуется получить Ваше явное согласие. Например, наша Компания может реализовывать совместное предложение или конкурс с третьей стороной, тогда мы попросим у Вас разрешение на совместное использование Вашей личной информации с третьей стороной.</p>\
	            <p>2. Компаниям, работающим от нашего лица: Мы сотрудничаем с другими компаниями, выполняющими от нашего лица функции бизнес поддержки, в связи с чем Ваша личная информация может быть частично раскрыта. Мы требуем, чтобы такие компании использовали информацию только в целях предоставления услуг по договору; им запрещается передавать данную информацию другим сторонам в ситуациях, отличных от случаев, когда это вызвано необходимостью предоставления оговоренных услуг. Примеры функций бизнес поддержки: выполнение заказов, реализация заявок, выдача призов и бонусов, проведение опросов среди клиентов и управление информационными системами. Мы также раскрываем обобщенную неперсонифицированную информацию при выборе поставщиков услуг.</p>\
	            <p>3. Дочерним и совместным предприятиям: Под дочерним или совместным предприятием понимается организация, не менее 50% долевого участия которой принадлежит Компании. При передаче Вашей информации партнеру по дочернему или совместному предприятию наша Компания требует не разглашать данную информацию другим сторонам в маркетинговых целях и не использовать Вашу информацию каким-либо путем, противоречащим Вашему выбору. Если Вы указали, что не хотите получать от нашей Компании какие-либо маркетинговые материалы, то мы не будем передавать Вашу информацию своим партнерам по дочерним и совместным предприятиям для маркетинговых целей</p>\
	            <p>4. На совместно позиционируемых или партнерских страницах: Наша Компания может делиться информацией с компаниями-партнерами, вместе с которыми реализует специальные предложения и мероприятия по продвижению товара на совместно позиционируемых страницах нашего сайта. При запросе анкетных данных на таких страницах Вы получите предупреждение о передаче информации. Партнер использует любую предоставленную Вами информацию согласно собственному уведомлению о конфиденциальности, с которым Вы можете ознакомиться перед предоставлением информации о себе.</p>\
	            <p>5. При передаче контроля над предприятием: Наша Компания оставляет за собой право передавать Ваши анкетные данные в связи с полной или частичной продажей или трансфертом нашего предприятия или его активов. При продаже или трансферте бизнеса наша Компания предоставит Вам возможность отказаться от передачи информации о себе. В некоторых случаях это может означать, что новая организация не сможет далее предоставлять Вам услуги или продукты, ранее предоставляемые нашей Компанией.</p>\
	            <p>6. Правоохранительным органам: Наша Компания может без Вашего на то согласия раскрывать персональную информацию третьим сторонам по любой из следующих причин: во избежание нарушений закона, нормативных правовых актов или постановлений суда; участие в правительственных расследованиях; помощь в предотвращении мошенничества; а также укрепление или защита прав Компании или ее дочерних предприятий.</p>\
	            <p>Вся личная информация, которая передана Вами для регистрации на нашем сайте, может быть в любой момент изменена либо полностью удалена из нашей базы по Вашему запросу. Для этого Вам необходимо связаться с нами любым удобным для Вас способом, использую контактную информацию, размещенную в специальном разделе нашего сайта.</p>\
	            <p>Если Вы захотите отказаться от получения писем нашей регулярной рассылки, вы можете это сделать в любой момент с помощью специальной ссылки, которая размещается в конце каждого письма.</p> \
	</div>'
});
var answerForm = Modal({
	btnOpen: '.form button',
	textModal: '<h3>Ваша заявка принята!</h3> \
	<p>В ближайшие время мы с вам свяжемся.</p>',
	width: '420px',
	height: '280px'
});


window.onload = function(){
  var mainSlider = new Slider({
    images: '.mainslider img',
    next: '.mainbtn .next',
    prev: '.mainbtn .prev',
    interval: '3000'
  });
  var calcSlider = new Slider({
    images: '.calcslider img',
    next: '.calcbtn .next',
    prev: '.calcbtn .prev',
    interval: '3000'
  });
  function Slider(images) {

    this.images = document.querySelectorAll(images.images);
    this.btnPrev = document.querySelector(images.prev); 
    this.btnNext = document.querySelector(images.next); 
    this.interval = images.interval;
    this.images[0].style.opacity = '1'

    var i = 0;
    var timeInterval = setInterval(this.next, this.interval);

    this.prev = function() {
      this.images[i].style.opacity = '0';
       i--;
       if( i < 0){
         i = this.images.length - 1;
       }
       this.images[i].style.opacity = '1';
       clearInterval(timeInterval);
       timeInterval = setInterval(this.next.bind(this), this.interval);
      },

    this.next = function() {
      this.images[i].style.opacity = '0';
      i++;
      if( i >= this.images.length){
        i = 0;
      }
      this.images[i].style.opacity = '1';
      clearInterval(timeInterval);
      timeInterval = setInterval(this.next.bind(this), this.interval);
    },

    this.btnPrev.addEventListener('click', this.prev.bind(this));
    this.btnNext.addEventListener('click', this.next.bind(this));
    this.next();
   };
};
